licenses(['notice'])

HEADERS = [
        "H5AbstractDs.h",
        "H5Epubgen.h",
        "H5Gpublic.h",
        "H5PLpublic.h",
        "H5ACpublic.h",
        "H5Epublic.h",
        "H5Group.h",
        "h5p.mod",
        "h5a.mod",
        "H5Exception.h",
        "H5IdComponent.h",
        "H5Ppublic.h",
        "H5api_adpt.h",
        "H5f90i_gen.h",
        "h5im.mod",
        "H5PredType.h",
        "H5Apublic.h",
        "H5f90i.h",
        "h5i.mod",
        "H5PropList.h",
        "H5ArrayType.h",
        "H5FaccProp.h",
        "H5IMpublic.h",
        "H5PTpublic.h",
        "H5AtomType.h",
        "H5FcreatProp.h",
        "H5Include.h",
        "H5pubconf.h",
        "H5Attribute.h",
        "H5FDcore.h",
        "H5IntType.h",
        "H5public.h",
        "H5Classes.h",
        "H5FDdirect.h",
        "H5Ipublic.h",
        "h5r.mod",
        "H5CommonFG.h",
        "H5FDfamily.h",
        "H5LDpublic.h",
        "H5Rpublic.h",
        "H5CompType.h",
        "H5FDlog.h",
        "h5lib.mod",
        "h5s.mod",
        "H5CppDoc.h",
        "H5FDmpi.h",
        "H5Library.h",
        "H5Spublic.h",
        "H5Cpp.h",
        "H5FDmpio.h",
        "h5l.mod",
        "H5StrType.h",
        "H5Cpublic.h",
        "H5FDmulti.h",
        "H5Location.h",
        "h5tb_const.mod",
        "H5DataSet.h",
        "H5FDpublic.h",
        "H5Lpublic.h",
        "h5tb.mod",
        "H5DataSpace.h",
        "H5FDsec2.h",
        "h5lt_const.mod",
        "H5TBpublic.h",
        "H5DataType.h",
        "H5FDstdio.h",
        "h5lt.mod",
        "h5t.mod",
        "H5DcreatProp.h",
        "H5File.h",
        "H5LTpublic.h",
        "H5Tpublic.h",
        "h5d.mod",
        "H5FloatType.h",
        "H5MMpublic.h",
        "H5VarLenType.h",
        "H5DOpublic.h",
        "h5f.mod",
        "H5Object.h",
        "H5version.h",
        "H5Dpublic.h",
        "h5fortkit.mod",
        "H5OcreatProp.h",
        "h5z.mod",
        "h5ds.mod",
        "h5fortran_types.mod",
        "h5o.mod",
        "H5Zpublic.h",
        "H5DSpublic.h",
        "H5Fpublic.h",
        "H5Opublic.h",
        "hdf5.h",
        "H5DxferProp.h",
        "h5_gen.mod",
        "H5overflow.h",
        "hdf5_hl.h",
        "h5e.mod",
        "h5global.mod",
        "H5PacketTable.h",
        "hdf5.mod",
        "H5EnumType.h",
        "h5g.mod",
        "H5PLextern.h",
]

genrule(
    name = "link_headers",
    outs = HEADERS,
    cmd = """
      for i in $(OUTS); do
        i=$${i##*/}
        ln -sf $(INCLUDEDIR)/hdf5/serial/$$i $(@D)/$$i
      done
    """,
)

cc_library(
    name='hdf5',
    hdrs= HEADERS,
    includes = ["."],
    linkopts=[
        '-lhdf5_serial'
    ],
    deps=[
        "@zlib//:zlib",
        "@szip//:szip",
        ],
    visibility = ["//visibility:public"],
)